<Window x:Class="NiTodo.Desktop.ScheduleWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:NiTodo.Desktop"
        Title="排程" Width="520" Height="520" ResizeMode="CanResizeWithGrip">
    <Window.Resources>
        <local:ScheduleFrequencyToTextConverter x:Key="ScheduleFrequencyToTextConverter"/>
    </Window.Resources>
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- 新增區塊 -->
        <GroupBox Header="新增排程" Grid.Row="0" Margin="0,0,0,10">
            <StackPanel Margin="10" >
                <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                    <TextBlock Text="任務名稱" Width="70" VerticalAlignment="Center"/>
                    <TextBox x:Name="TaskNameTextBox" Width="380"/>
                </StackPanel>

                <Border BorderBrush="#DDD" BorderThickness="1" Padding="8">
                    <StackPanel>
                        <TextBlock Text="預計執行時間" FontWeight="Bold" Margin="0,0,0,6"/>

                        <!-- 頻率選擇：每日/每週/每月/每年 -->
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                            <TextBlock Text="頻率" VerticalAlignment="Center" Margin="0,0,8,0"/>
                            <ComboBox x:Name="FrequencyCombo" Width="140" SelectionChanged="FrequencyCombo_SelectionChanged">
                                <ComboBoxItem Content="每日" Tag="Daily" IsSelected="True"/>
                                <ComboBoxItem Content="每週" Tag="Weekly"/>
                                <ComboBoxItem Content="每月" Tag="Monthly"/>
                                <ComboBoxItem Content="每年" Tag="Yearly"/>
                            </ComboBox>
                        </StackPanel>

                        <!-- 每日 -->
                        <StackPanel x:Name="DailyPanel" Orientation="Horizontal" Margin="0,0,0,6">
                            <TextBlock Text="小時" VerticalAlignment="Center"/>
                            <TextBox x:Name="HourTextBox" Width="40" Margin="6,0,12,0"/>
                            <TextBlock Text="分鐘" VerticalAlignment="Center"/>
                            <TextBox x:Name="MinuteTextBox" Width="40" Margin="6,0,0,0"/>
                        </StackPanel>

                        <!-- 每週 -->
                        <StackPanel x:Name="WeeklyPanel" Visibility="Collapsed" Margin="0,0,0,6">
                            <UniformGrid Columns="7" Rows="1">
                                <CheckBox Content="日" x:Name="SunCheck"/>
                                <CheckBox Content="一" x:Name="MonCheck"/>
                                <CheckBox Content="二" x:Name="TueCheck"/>
                                <CheckBox Content="三" x:Name="WedCheck"/>
                                <CheckBox Content="四" x:Name="ThuCheck"/>
                                <CheckBox Content="五" x:Name="FriCheck"/>
                                <CheckBox Content="六" x:Name="SatCheck"/>
                            </UniformGrid>
                            <StackPanel Orientation="Horizontal" Margin="0,6,0,0">
                                <TextBlock Text="小時" VerticalAlignment="Center"/>
                                <TextBox x:Name="W_HourTextBox" Width="40" Margin="6,0,12,0"/>
                                <TextBlock Text="分鐘" VerticalAlignment="Center"/>
                                <TextBox x:Name="W_MinuteTextBox" Width="40" Margin="6,0,0,0"/>
                            </StackPanel>
                        </StackPanel>

                        <!-- 每月 -->
                        <StackPanel x:Name="MonthlyPanel" Visibility="Collapsed" Margin="0,0,0,6">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="日期(1~31)" VerticalAlignment="Center"/>
                                <TextBox x:Name="M_DayTextBox" Width="60" Margin="6,0,12,0"/>
                                <TextBlock Text="小時" VerticalAlignment="Center"/>
                                <TextBox x:Name="M_HourTextBox" Width="40" Margin="6,0,12,0"/>
                                <TextBlock Text="分鐘" VerticalAlignment="Center"/>
                                <TextBox x:Name="M_MinuteTextBox" Width="40" Margin="6,0,0,0"/>
                            </StackPanel>
                        </StackPanel>

                        <!-- 每年 -->
                        <StackPanel x:Name="YearlyPanel" Visibility="Collapsed" Margin="0,0,0,6">
                            <UniformGrid Columns="6" Rows="2" Margin="0,0,0,6">
                                <CheckBox Content="1月" x:Name="M1"/>    <CheckBox Content="2月" x:Name="M2"/>
                                <CheckBox Content="3月" x:Name="M3"/>    <CheckBox Content="4月" x:Name="M4"/>
                                <CheckBox Content="5月" x:Name="M5"/>    <CheckBox Content="6月" x:Name="M6"/>
                                <CheckBox Content="7月" x:Name="M7"/>    <CheckBox Content="8月" x:Name="M8"/>
                                <CheckBox Content="9月" x:Name="M9"/>    <CheckBox Content="10月" x:Name="M10"/>
                                <CheckBox Content="11月" x:Name="M11"/>  <CheckBox Content="12月" x:Name="M12"/>
                            </UniformGrid>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="日期(1~31)" VerticalAlignment="Center"/>
                                <TextBox x:Name="Y_DayTextBox" Width="60" Margin="6,0,12,0"/>
                                <TextBlock Text="小時" VerticalAlignment="Center"/>
                                <TextBox x:Name="Y_HourTextBox" Width="40" Margin="6,0,12,0"/>
                                <TextBlock Text="分鐘" VerticalAlignment="Center"/>
                                <TextBox x:Name="Y_MinuteTextBox" Width="40" Margin="6,0,0,0"/>
                            </StackPanel>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <Button x:Name="SaveButton" Content="儲存" Width="80" HorizontalAlignment="Right" Margin="0,10,0,0" Click="SaveButton_Click"/>
            </StackPanel>
        </GroupBox>

        <!-- 任務清單區塊 -->
        <GroupBox Header="任務清單" Grid.Row="1">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <ListView x:Name="ScheduleList" Grid.Row="0" Margin="4">
                    <ListView.View>
                        <GridView>
                            <GridViewColumn Header="名稱" DisplayMemberBinding="{Binding Content}" Width="200"/>
                            <GridViewColumn Header="頻率" Width="240">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding ScheduleFrequency, Converter={StaticResource ScheduleFrequencyToTextConverter}}"/>
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                            <GridViewColumn Header="操作" Width="60">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <Button Content="刪除" Tag="{Binding Id}" Click="DeleteSchedule_Click"/>
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                        </GridView>
                    </ListView.View>
                </ListView>
            </Grid>
        </GroupBox>
    </Grid>
</Window>